# Визуализация прогресса участников в виде графиков

## Общее описание

Система визуализации должна предоставлять участникам и организаторам соревнования наглядное представление прогресса в снижении веса. Графики должны быть понятными, информативными и эстетически приятными.

## Типы графиков

### 1. Индивидуальный график прогресса участника

#### Основные элементы:
- Ось X: прогресс в условных пунктах (от 0 до достижения цели)
- Ось Y: вес (кг) или количество сброшенных/набранных килограммов
- Линия прогресса: показывает изменение позиции участника по шкале прогресса
- Горизонтальные линии: стартовая позиция и целевая позиция
- Точки данных: текущая позиция участника на шкале прогресса

#### Дополнительные элементы:
- Цветовая кодировка: зеленый - прогресс в правильном направлении, красный - отклонение (набор веса)
- Всплывающие подсказки: при наведении показывать количество сброшенных/набранных кг
- Средняя линия тренда: показывает общее направление прогресса

### 2. Сравнительный график всех участников (основной график соревнования)

#### Основные элементы:
- Ось X: прогресс в условных пунктах (от 0 до достижения цели)
- Ось Y: (отсутствует или используется для других целей)
- Точки/полосы: для каждого участника отображается текущая позиция на шкале прогресса
- Цветовая схема: уникальный цвет для каждого участника
- Метки: количество сброшенных/набранных кг для каждой точки

#### Особенности:
- Каждый участник имеет индивидуальную шкалу прогресса, зависящую от его параметров
- Участники с разными начальными условиями сравниваются по справедливой системе очков
- Точка участника может двигаться как вправо (прогресс), так и влево (регресс)
- Метки над точками показывают актуальный прогресс в кг (например, "-3кг", "+2кг")
- Возможность фильтрации: показать только активных участников, топ-N и т.д.

### 3. Гистограмма ежедневной активности

#### Основные элементы:
- Ось X: дни
- Ось Y: количество шагов
- Столбцы: для каждого дня столбец, представляющий количество шагов
- Цветовая кодировка: разные цвета для разных диапазонов активности

## Техническая реализация

### Используемые библиотеки

1. **matplotlib** - для создания статических графиков
2. **seaborn** - для улучшения визуального оформления
3. **plotly** - для интерактивных графиков (если потребуется)
4. **PIL (Pillow)** - для сохранения графиков в формате изображений
5. **Python 3.13** - основной язык программирования с поддержкой современных библиотек визуализации

### Формат вывода

- Графики сохраняются в формате PNG для отправки в Telegram
- Размер изображения: 800x600 пикселей (оптимальный для отображения в Telegram)
- Качество: сбалансированное между размером файла и читаемостью

### Генерация графиков

#### Автоматическая генерация
- Графики обновляются при каждом новом вводе данных
- Ежедневная генерация сводных графиков
- Генерация по запросу командой `/progress`

#### Параметры настройки
- Пользователь может выбрать временной диапазон (неделя, месяц, всё время)
- Пользователь может выбрать тип отображения (вес, прогресс в пунктах)
- Возможность выбора конкретных участников для сравнения

## Дизайн и эстетика

### Цветовая схема
- Основные цвета: синий, зеленый, оранжевый (дружелюбные, хорошо контрастируют)
- Цвета для важных элементов: зеленый для прогресса (движение вправо), красный для регресса (движение влево)
- Фон: светлый, не отвлекающий от данных
- Цвета участников: уникальный цвет для каждого участника для идентификации на сравнительном графике

### Шрифты
- Четкие, легко читаемые шрифты
- Размер шрифта: достаточный для просмотра на мобильных устройствах
- Толщина линий: заметная, но не перегружающая график
- Метки прогресса: четко видимые, с указанием количества кг

### Адаптивность
- Графики должны быть читаемы как на больших экранах, так и на мобильных устройствах
- При масштабировании сохраняется читаемость подписей и меток

## Интерактивность

### В Telegram
- Команды для выбора типа графика
- Кнопки для изменения временного диапазона
- Возможность получения детализированной информации

### При генерации в боте
- Команда `/chart [type] [period]` - генерация графика с параметрами
- Типы: `individual`, `comparison`, `steps`
- Периоды: `week`, `month`, `all`

## Интеграция с системой

### Обновление данных
- Графики автоматически обновляются при добавлении новых данных
- Кэширование графиков для ускорения отклика
- Очистка кэша при значительных изменениях в данных

### Хранение
- Временные файлы графиков хранятся в папке `charts/`
- Автоматическая очистка старых файлов (например, старше недели)
- Именование файлов по шаблону: `user_{id}_{timestamp}.png`

## Дополнительные возможности

### Экспорт данных
- Возможность экспорта графика в файл (PNG)
- Возможность получения CSV-файла с данными для самостоятельного анализа

### Специальные события
- Отметки на графиках при достижении важных вех (например, 10% снижения веса)
- Визуальное выделение особых периодов (отпуск, болезнь и т.д.)

## Примеры визуализации

### Индивидуальный график
```
Вес (кг) или кг изменения
-30 |                    |
-25 |                 ●
-20 |              ●
-15 |           ●
-10 |        ●
 -5 |     ●
  0 |  ●
   |_________________________
   0   5  10  15  20  25  30 Прогресс (усл. ед.)
Старт: 0кг | Цель: -25кг (например)
```

### Сравнительный график (основной график соревнования)
```
Позиция на шкале прогресса

А:        ● (-5кг)                        |
Б:           ● (-3кг)                 |
В:      ● (-7кг)                           |
Г:  ● (+2кг)                      |
       
   ___|_______________________________________
      0   5  10  15  20  25  30  35  40  45  50 Прогресс (усл. ед.)
```

Где:
- Ось X представляет прогресс в условных пунктах от 0 до достижения цели
- Каждый участник имеет свою индивидуальную шкалу прогресса
- Точка участника может двигаться как вправо (снижение веса), так и влево (набор веса)
- Метки рядом с точками показывают количество сброшенных/набранных кг
- Участники сравниваются по справедливой системе очков, учитывающей их индивидуальные параметры
- Каждый участник имеет свою индивидуальную цель, обозначенную символом "|", расположенную на соответствующей позиции по шкале прогресса